# RHOAI Security Dashboard

A Streamlit web application that displays security data from the `rhoai_security_pyxis.py` script in an interactive dashboard format, inspired by Red Hat Ecosystem Catalog design.

## Features

- **Security Overview**: Visual summary of security metrics, freshness grades, and CVE distributions
- **Image Details**: Filterable table with expandable rows showing detailed security information per image
- **CVE Analysis**: Comprehensive CVE list with frequency analysis and direct links to Red Hat advisories
- **Interactive Controls**: Search, filter, and drill-down capabilities
- **Red Hat Styling**: Professional interface inspired by Red Hat design patterns

## Installation

### Prerequisites
- Python 3.7 or later
- uv package manager (recommended) or pip
- Access to Red Hat Pyxis API (for generating fresh data)

### Setup

#### Option 1: Using uv (Recommended)
1. Install uv package manager:
   ```bash
   curl -LsSf https://astral.sh/uv/install.sh | sh
   ```

2. The launcher script will automatically handle virtual environment creation and dependency installation

#### Option 2: Using pip
1. Install required dependencies:
   ```bash
   pip install -r requirements.txt
   ```

2. Ensure `rhoai_security_pyxis.py` is in the same directory as the dashboard

## Usage

### Starting the Dashboard

#### Quick Start (with uv)
```bash
./run_dashboard.sh
```

#### Manual Start
```bash
# With uv (in virtual environment)
uv run streamlit run rhoai_security_dashboard.py

# With pip/system Python
streamlit run rhoai_security_dashboard.py
```

The dashboard will be available at `http://localhost:8501`

### Using the Dashboard

#### Sidebar Controls
- **RHOAI Version**: Select the RHOAI release version to analyze (v2.21, v2.22, v2.23, v2.24)
- **Data Source**: Choose between loading existing JSON files or generating fresh data
- **Fetch Security Data**: Button to run the `rhoai_security_pyxis.py` script with selected parameters

#### Main Dashboard Tabs

**üîç Security Overview**
- Summary metrics cards showing total images, unique CVEs, average CVEs per image, and Grade A percentage
- Freshness Grade Distribution chart
- CVE Count Distribution chart
- Top 5 most vulnerable images table

**üìã Image Details**
- Search functionality to find specific images by name or ID
- Filter by freshness grade
- Expandable rows showing:
  - Image metadata (ID, creation date, freshness grade)
  - CVE count and complete CVE list with links
  - Advisory URLs

**üö® CVE Analysis**
- Complete list of unique CVEs found across all images
- Most Common CVEs chart showing frequency distribution
- Searchable CVE table with direct links to Red Hat advisories
- CVE frequency statistics

## Data Sources

The dashboard works with JSON data generated by the `rhoai_security_pyxis.py` script. It can:

1. **Load existing files**: Use previously generated JSON files for quick analysis
2. **Generate fresh data**: Execute the Pyxis script to fetch current security information

### Expected Data Format

The dashboard expects JSON files with the following structure:
```json
{
  "metadata": {
    "release": "v2.21",
    "generated_at": "2024-08-18T...",
    "total_images": 47,
    "total_unique_cves": 210
  },
  "images": [
    {
      "_id": "image_id",
      "repositories": [...],
      "freshness_grades": [{"grade": "A"}],
      "cves": ["https://access.redhat.com/security/cve/CVE-..."],
      "creation_date": "2024-...",
      ...
    }
  ],
  "unique_cves": ["https://access.redhat.com/security/cve/CVE-..."]
}
```

## Features in Detail

### Visual Design
- **Red Hat Color Scheme**: Uses Red Hat brand colors (#EE0000, #CC0000)
- **Status Indicators**: Color-coded freshness grades (Green=A, Yellow=B/C, Red=D+)
- **Professional Layout**: Clean, responsive design with proper spacing and typography
- **Interactive Charts**: Plotly-powered visualizations with hover effects and zoom capabilities

### Security Metrics
- **Freshness Grades**: Security assessment grades from A (best) to F (worst)
- **CVE Tracking**: Common Vulnerabilities and Exposures with direct links to advisories
- **Image Analysis**: Per-image security breakdown with detailed metadata
- **Trend Analysis**: Distribution charts showing security posture across the image set

### Performance Features
- **Data Caching**: Streamlit caching for improved performance
- **Lazy Loading**: Efficient data processing and display
- **Search Optimization**: Fast text-based filtering and search
- **Responsive Design**: Works on desktop and mobile devices

## Troubleshooting

### Common Issues

**"Data file not found" error**
- Ensure you have generated data using the Pyxis script
- Check that JSON files are in the same directory as the dashboard
- Verify file permissions

**"rhoai_security_pyxis.py script not found" error**
- Ensure the Pyxis script is in the same directory
- Check script permissions (`chmod +x rhoai_security_pyxis.py`)

**Script execution timeout**
- The Pyxis script has a 5-minute timeout
- For large datasets, consider using pre-generated files
- Check network connectivity to Red Hat APIs

**Missing dependencies**
- With uv: Run `./run_dashboard.sh` (auto-installs dependencies)
- With pip: Install packages `pip install -r requirements.txt`
- Ensure you're using Python 3.7 or later

### Performance Tips

1. **Use cached data**: Load existing JSON files for faster startup
2. **Filter early**: Use search and filter controls to reduce displayed data
3. **Generate data off-peak**: API calls are faster during off-peak hours
4. **Save results**: Generated JSON files can be reused across sessions
5. **Use uv**: uv provides faster dependency resolution and virtual environment management

## Development

### File Structure
```
rhoai-security-manifest/
‚îú‚îÄ‚îÄ rhoai_security_dashboard.py    # Main dashboard application
‚îú‚îÄ‚îÄ rhoai_security_pyxis.py        # Data collection script
‚îú‚îÄ‚îÄ requirements.txt               # Python dependencies
‚îú‚îÄ‚îÄ DASHBOARD_README.md            # This documentation
‚îî‚îÄ‚îÄ *.json                        # Generated security data files
```

### Customization
The dashboard can be customized by modifying:
- **CSS styles**: Update the custom CSS in the main application file
- **Color schemes**: Modify the color mappings for status indicators
- **Chart types**: Replace Plotly charts with alternative visualizations
- **Layout**: Adjust the tab structure and component arrangement

### Adding New Features
To extend the dashboard:
1. Add new functions for data processing
2. Create additional tabs or sections
3. Implement new chart types or visualizations
4. Add export capabilities (CSV, PDF, etc.)

## Support

For issues related to:
- **Dashboard functionality**: Check the troubleshooting section above
- **Data collection**: Refer to `rhoai_security_pyxis.py` documentation
- **Red Hat APIs**: Consult Red Hat Pyxis API documentation

## License

This project follows the same license as the parent RHOAI security manifest project.